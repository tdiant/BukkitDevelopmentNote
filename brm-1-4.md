# 认识配置文件

## 配置文件
配置文件用来储存配置信息, 以便使用文件开关功能、储存数据、修改信息.  
我们往往需要读写配置文件. Bukkit为我们提供了配置API.   

## 配置API
配置API是BukkitAPI提供的读写配置文件的工具. 其相对而言较为简单, 是插件开发中常用的API.  

目前为止, 配置API只有YAML配置功能可用. 这也是大多数插件为什么配置文件是YAML文件的原因.  
在本文中, 我们也将使用YAML配置API.   

*现在的配置API的类均在 `org.bukkit.configuration` 和 `org.bukkit.configuration.file` 包中. 在早期版本(MC 1.1以及之前), 这些东西都在`org.bukkit.util.configuration`包, 而并非上面的这两个包.*   

# 了解YAML文件

相信开服的经验已经使你对YAML文件有了初步认识.  
YAML文件的文件后缀是`.yml`. 其配置文件结构需要严格遵守YAML标准.  

下面即是一个符合标准的YAML配置文件的内容:  
```yaml
a: 1
b: "abc"
c: abc
d:
  e: true
  f: 666.233
  g:
  - '2333'
  - '998'
```

在本节中, 我们暂不学习如何使用配置API读写配置文件. 首先对YAML配置文件做简单了解.    

第一行 `a: 1` 代表`a`键(Key)对应的值(Value)为`1`.  
在读写YAML配置文件时, 需要知道键, 由键获取这个键对应的数据.  

在d键中, 存在e、f、g三个子键, 相信你可以**根据空格看出来谁是谁的子键**, 其对应的名称分别为`d.e`、`d.f`、`d.g`.  
也就是说, 我们想获取那个现在值为`true`的键对应的数据, 应该获取键`d.e`的数据.

子键也可以有其子键, 例如:
```yaml
a:
  b:
    c:
      d:
        e:
          f:
            g: 233
```
那么`a.b.c.d.e.f.g`键的值为`233`.  

回到第一份YAML配置内容中.  
`a`键对应的值是`1`, `1`可以代表是一个数字, 也可以代表是一个字符串.  
这意味着, 字符串在一些情况下可以不必带有引号.  
*那我在实际使用配置API的时候获取到的`a`键值究竟是什么类型? 具体会在后面提及.*  

`d.e`键对应的值是一个boolean类型数据.  
`d.g`键对应的是一个StringList类型数据.

YAML中字符串可以用双引号表示, 也可以使用单引号表示, 但是不能一半是双引号, 一半是单引号.  
YAML中注释使用#, 类似Java中的//, 请看下面的实例:
```yaml
#我是注释
```
```yaml
a: 'abc' #这是一个字符串abc
b: "def" #用双引号也可以
```
```
c: 'hji" #这样不可以
```
```yaml
d: '""' #这是字符串, 内容是一对英文双引号
e: "''" #这是字符串, 内容是一对英文单引号
```

# 感受配置API的使用
在后面的内容中, 将详细叙述配置API的使用方式. 在这里, 通过一个实例来感受配置API的使用方式.

首先我们需要创建`config.yml`文件. 默认的`config.yml`文件要与`plugin.yml`文件处于同一目录下. 在这里我们在默认`config.yml`文件中存入这些信息:  
```yaml
a: 1
```
完成后, 我们需在`onEnable`方法中插入这样的语句:
```java
saveDefaultConfig(); //我建议这个东西写在主类onEnable方法开头那里或者onLoad方法里

System.out.println("Hello! Test Number is "+getConfig().getInt("a")); //输出文件
```  
插件加载后, 可以发现控制台输出:
```
Hello! Test Number is 1
```

在plugins文件夹中生成了以插件名为名的文件夹, 打开该文件夹里的config.yml文件, 并将其中的`a`键改为其他整数后使用reload指令, 可以显示该数值.
